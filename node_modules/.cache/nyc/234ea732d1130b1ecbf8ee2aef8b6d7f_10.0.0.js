"use strict";var cov_mm6fqex1k=function(){var path="/Users/alexgoddijn/Documents/UBC/CPSC 310/cpsc310project_team199/src/controller/ZipParser.js",hash="ac6f75f269c1b2dd78f4ef5e1008384a400669c2",global=new Function('return this')(),gcv="__coverage__",coverageData={path:"/Users/alexgoddijn/Documents/UBC/CPSC 310/cpsc310project_team199/src/controller/ZipParser.js",statementMap:{"0":{start:{line:2,column:13},end:{line:2,column:31}},"1":{start:{line:3,column:13},end:{line:3,column:28}},"2":{start:{line:4,column:12},end:{line:4,column:28}},"3":{start:{line:5,column:17},end:{line:86,column:3}},"4":{start:{line:7,column:8},end:{line:7,column:50}},"5":{start:{line:9,column:4},end:{line:54,column:6}},"6":{start:{line:10,column:17},end:{line:10,column:21}},"7":{start:{line:11,column:18},end:{line:11,column:29}},"8":{start:{line:12,column:8},end:{line:53,column:11}},"9":{start:{line:13,column:26},end:{line:15,column:13}},"10":{start:{line:16,column:12},end:{line:52,column:15}},"11":{start:{line:17,column:34},end:{line:17,column:45}},"12":{start:{line:18,column:37},end:{line:18,column:48}},"13":{start:{line:19,column:16},end:{line:24,column:17}},"14":{start:{line:20,column:31},end:{line:20,column:50}},"15":{start:{line:21,column:20},end:{line:23,column:21}},"16":{start:{line:22,column:24},end:{line:22,column:66}},"17":{start:{line:25,column:16},end:{line:47,column:19}},"18":{start:{line:26,column:20},end:{line:30,column:21}},"19":{start:{line:27,column:38},end:{line:27,column:52}},"20":{start:{line:28,column:40},end:{line:28,column:59}},"21":{start:{line:29,column:24},end:{line:29,column:74}},"22":{start:{line:31,column:20},end:{line:42,column:23}},"23":{start:{line:32,column:39},end:{line:32,column:41}},"24":{start:{line:33,column:24},end:{line:36,column:25}},"25":{start:{line:34,column:42},end:{line:34,column:59}},"26":{start:{line:35,column:28},end:{line:35,column:64}},"27":{start:{line:37,column:24},end:{line:37,column:42}},"28":{start:{line:39,column:24},end:{line:39,column:91}},"29":{start:{line:40,column:24},end:{line:40,column:50}},"30":{start:{line:41,column:24},end:{line:41,column:36}},"31":{start:{line:44,column:20},end:{line:44,column:85}},"32":{start:{line:45,column:20},end:{line:45,column:46}},"33":{start:{line:46,column:20},end:{line:46,column:32}},"34":{start:{line:49,column:16},end:{line:49,column:81}},"35":{start:{line:50,column:16},end:{line:50,column:42}},"36":{start:{line:51,column:16},end:{line:51,column:28}},"37":{start:{line:55,column:4},end:{line:72,column:6}},"38":{start:{line:56,column:17},end:{line:56,column:21}},"39":{start:{line:57,column:8},end:{line:71,column:11}},"40":{start:{line:58,column:27},end:{line:58,column:29}},"41":{start:{line:59,column:12},end:{line:69,column:13}},"42":{start:{line:60,column:29},end:{line:60,column:35}},"43":{start:{line:61,column:16},end:{line:68,column:17}},"44":{start:{line:62,column:20},end:{line:62,column:60}},"45":{start:{line:65,column:20},end:{line:65,column:93}},"46":{start:{line:66,column:20},end:{line:66,column:46}},"47":{start:{line:67,column:20},end:{line:67,column:32}},"48":{start:{line:70,column:12},end:{line:70,column:30}},"49":{start:{line:73,column:4},end:{line:84,column:6}},"50":{start:{line:74,column:21},end:{line:74,column:23}},"51":{start:{line:75,column:8},end:{line:75,column:46}},"52":{start:{line:76,column:8},end:{line:76,column:49}},"53":{start:{line:77,column:8},end:{line:77,column:48}},"54":{start:{line:78,column:8},end:{line:78,column:44}},"55":{start:{line:79,column:8},end:{line:79,column:48}},"56":{start:{line:80,column:8},end:{line:80,column:46}},"57":{start:{line:81,column:8},end:{line:81,column:46}},"58":{start:{line:82,column:8},end:{line:82,column:57}},"59":{start:{line:83,column:8},end:{line:83,column:22}},"60":{start:{line:85,column:4},end:{line:85,column:21}},"61":{start:{line:87,column:0},end:{line:87,column:62}},"62":{start:{line:88,column:0},end:{line:88,column:28}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:5,column:17},end:{line:5,column:18}},loc:{start:{line:5,column:29},end:{line:86,column:1}}},"1":{name:"ZipParser",decl:{start:{line:6,column:13},end:{line:6,column:22}},loc:{start:{line:6,column:25},end:{line:8,column:5}}},"2":{name:"(anonymous_2)",decl:{start:{line:9,column:32},end:{line:9,column:33}},loc:{start:{line:9,column:54},end:{line:54,column:5}}},"3":{name:"(anonymous_3)",decl:{start:{line:12,column:27},end:{line:12,column:28}},loc:{start:{line:12,column:54},end:{line:53,column:9}}},"4":{name:"(anonymous_4)",decl:{start:{line:16,column:48},end:{line:16,column:49}},loc:{start:{line:16,column:64},end:{line:48,column:13}}},"5":{name:"(anonymous_5)",decl:{start:{line:25,column:49},end:{line:25,column:50}},loc:{start:{line:25,column:69},end:{line:43,column:17}}},"6":{name:"(anonymous_6)",decl:{start:{line:31,column:50},end:{line:31,column:51}},loc:{start:{line:31,column:73},end:{line:38,column:21}}},"7":{name:"(anonymous_7)",decl:{start:{line:38,column:29},end:{line:38,column:30}},loc:{start:{line:38,column:44},end:{line:42,column:21}}},"8":{name:"(anonymous_8)",decl:{start:{line:43,column:25},end:{line:43,column:26}},loc:{start:{line:43,column:40},end:{line:47,column:17}}},"9":{name:"(anonymous_9)",decl:{start:{line:48,column:21},end:{line:48,column:22}},loc:{start:{line:48,column:36},end:{line:52,column:13}}},"10":{name:"(anonymous_10)",decl:{start:{line:55,column:40},end:{line:55,column:41}},loc:{start:{line:55,column:65},end:{line:72,column:5}}},"11":{name:"(anonymous_11)",decl:{start:{line:57,column:27},end:{line:57,column:28}},loc:{start:{line:57,column:54},end:{line:71,column:9}}},"12":{name:"(anonymous_12)",decl:{start:{line:73,column:36},end:{line:73,column:37}},loc:{start:{line:73,column:61},end:{line:84,column:5}}}},branchMap:{"0":{loc:{start:{line:21,column:20},end:{line:23,column:21}},type:"if",locations:[{start:{line:21,column:20},end:{line:23,column:21}},{start:{line:21,column:20},end:{line:23,column:21}}]}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0},b:{"0":[0,0]},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();var Util_1=(++cov_mm6fqex1k.s[0],require("../Util"));var util_1=(++cov_mm6fqex1k.s[1],require("util"));var JSZip=(++cov_mm6fqex1k.s[2],require("jszip"));var ZipParser=(++cov_mm6fqex1k.s[3],function(){++cov_mm6fqex1k.f[0];function ZipParser(){++cov_mm6fqex1k.f[1];++cov_mm6fqex1k.s[4];Util_1.default.trace("ZipParser::init()");}++cov_mm6fqex1k.s[5];ZipParser.prototype.parse=function(zipBin,id){++cov_mm6fqex1k.f[2];var vm=(++cov_mm6fqex1k.s[6],this);var zip=(++cov_mm6fqex1k.s[7],new JSZip());++cov_mm6fqex1k.s[8];return new Promise(function(fulfill,reject){++cov_mm6fqex1k.f[3];var options=(++cov_mm6fqex1k.s[9],{base64:true});++cov_mm6fqex1k.s[10];zip.loadAsync(zipBin,options).then(function(data){++cov_mm6fqex1k.f[4];var promiseList=(++cov_mm6fqex1k.s[11],new Array());var subPromiseList=(++cov_mm6fqex1k.s[12],new Array());++cov_mm6fqex1k.s[13];for(var filename in data.files){var file=(++cov_mm6fqex1k.s[14],data.file(filename));++cov_mm6fqex1k.s[15];if(!util_1.isNullOrUndefined(file)){++cov_mm6fqex1k.b[0][0];++cov_mm6fqex1k.s[16];subPromiseList.push(file.async("string"));}else{++cov_mm6fqex1k.b[0][1];}}++cov_mm6fqex1k.s[17];Promise.all(subPromiseList).then(function(contents){++cov_mm6fqex1k.f[5];++cov_mm6fqex1k.s[18];for(var _i=0,contents_1=contents;_i<contents_1.length;_i++){var content=(++cov_mm6fqex1k.s[19],contents_1[_i]);var courseDat=(++cov_mm6fqex1k.s[20],JSON.parse(content));++cov_mm6fqex1k.s[21];promiseList.push(vm.genCourseList(courseDat,id));}++cov_mm6fqex1k.s[22];Promise.all(promiseList).then(function(coursesList){++cov_mm6fqex1k.f[6];var toReturn=(++cov_mm6fqex1k.s[23],[]);++cov_mm6fqex1k.s[24];for(var _i=0,coursesList_1=coursesList;_i<coursesList_1.length;_i++){var courses=(++cov_mm6fqex1k.s[25],coursesList_1[_i]);++cov_mm6fqex1k.s[26];toReturn=toReturn.concat(courses);}++cov_mm6fqex1k.s[27];fulfill(toReturn);}).catch(function(err){++cov_mm6fqex1k.f[7];++cov_mm6fqex1k.s[28];Util_1.default.error("Error in ZipParser.parse [genCourseList()]");++cov_mm6fqex1k.s[29];Util_1.default.error(err);++cov_mm6fqex1k.s[30];reject(err);});}).catch(function(err){++cov_mm6fqex1k.f[8];++cov_mm6fqex1k.s[31];Util_1.default.error("Error in ZipParser.parse() [file.aync()]");++cov_mm6fqex1k.s[32];Util_1.default.error(err);++cov_mm6fqex1k.s[33];reject(err);});}).catch(function(err){++cov_mm6fqex1k.f[9];++cov_mm6fqex1k.s[34];Util_1.default.error("Error in ZipParser.parse() [loadAsync()]");++cov_mm6fqex1k.s[35];Util_1.default.error(err);++cov_mm6fqex1k.s[36];reject(err);});});};++cov_mm6fqex1k.s[37];ZipParser.prototype.genCourseList=function(courseDat,id){++cov_mm6fqex1k.f[10];var vm=(++cov_mm6fqex1k.s[38],this);++cov_mm6fqex1k.s[39];return new Promise(function(fulfill,reject){++cov_mm6fqex1k.f[11];var toReturn=(++cov_mm6fqex1k.s[40],[]);++cov_mm6fqex1k.s[41];for(var _i=0,_a=courseDat.result;_i<_a.length;_i++){var course=(++cov_mm6fqex1k.s[42],_a[_i]);++cov_mm6fqex1k.s[43];try{++cov_mm6fqex1k.s[44];toReturn.push(vm.genCourse(course,id));}catch(err){++cov_mm6fqex1k.s[45];Util_1.default.error("Error in ZipParser.genCourseList() [genCourse()]");++cov_mm6fqex1k.s[46];Util_1.default.error(err);++cov_mm6fqex1k.s[47];reject(err);}}++cov_mm6fqex1k.s[48];fulfill(toReturn);});};++cov_mm6fqex1k.s[49];ZipParser.prototype.genCourse=function(courseObj,id){++cov_mm6fqex1k.f[12];var course=(++cov_mm6fqex1k.s[50],{});++cov_mm6fqex1k.s[51];course[id+"_id"]=courseObj.Course;++cov_mm6fqex1k.s[52];course[id+"_dept"]=courseObj.Subject;++cov_mm6fqex1k.s[53];course[id+"_audit"]=courseObj.Audit;++cov_mm6fqex1k.s[54];course[id+"_avg"]=courseObj.Avg;++cov_mm6fqex1k.s[55];course[id+"_title"]=courseObj.Title;++cov_mm6fqex1k.s[56];course[id+"_fail"]=courseObj.Fail;++cov_mm6fqex1k.s[57];course[id+"_pass"]=courseObj.Pass;++cov_mm6fqex1k.s[58];course[id+"_instructor"]=courseObj.Professor;++cov_mm6fqex1k.s[59];return course;};++cov_mm6fqex1k.s[60];return ZipParser;}());++cov_mm6fqex1k.s[61];Object.defineProperty(exports,"__esModule",{value:true});++cov_mm6fqex1k.s[62];exports.default=ZipParser;//# sourceMappingURL=ZipParser.js.map